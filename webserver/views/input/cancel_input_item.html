{{template "layout.html" .}}
{{define "content"}}
<main id="main">
    <div class="content-wrap">
        <div class="time-wrap">
            <p class="msg">남은시간</p>
            <p class="time-count">
                <span id="$counter">5</span>
            </p>
        </div>
        <div class="fixed-btn">
            <button class="btn-normal"><a href="/">첫 화면으로</a></button>
        </div>
        <!-- 입고 취소 -->
        <div class="msg-wrap">
            <div class="msg-body">
                <div class="img-wrap">
                    <img src="/static/images/ico_cancel.png" alt="">
                </div>
                <p class="msg">
                    택배 입고가 취소되었습니다. <br>
                    택배를 수거해주세요.
                </p>
            </div>
        </div>
    </div>
</main>

<script>
    let keep = true; // 함수 실행 가능 여부 확인 true : 가능

    send_stop_info();    // 최초실행
    isItemOnTable = setInterval(send_stop_info, 1000);

    /* 입고 취소 */
    function send_stop_info() {
        console.log("실행")
        let request = JSON.stringify({
            step: "2",
        });

        // 문 열고 물품 회수했는지 확인
        if(keep == true){
            keep = false;
            axios.post('/input/stop_input', request).then(res => {
                let response = res.data.data;
                console.log(res.data);
                // **삭제
                response = 'false';
                // 물품이 있다면 반복실행
                if(response == 'true'){
                    keep = true;
                } else{
                    // 물품이 없다면 inputItem
                    clearInterval(isItemOnTable);
                    location.href='/';
                }
            }).catch(err => {
                console.error(err);
            });
        }       
    }


    setTimeout(function () {
        location.href = '/';
    }, 30000);  // 30초 지나면 알림
</script>
{{end}}